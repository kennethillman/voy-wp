function togglePageRedirection(e){var i=jQuery("#enable-ajax").is(":checked");1==e.value?(jQuery("#redirect-user-to-selection-label").fadeIn(),!0===i&&jQuery(".redirect-new-window-div").fadeIn()):jQuery("#redirect-user-to-selection-label, .redirect-new-window-div").fadeOut()}function storeGlobalClicked(e){var i=e.parents("td").find("input").attr("name");jQuery(".clicked-input").val(i)}function populateDefaultValue(e){var i=jQuery(".clicked-input").val();jQuery(".clicked-input").val(""),tb_remove(),jQuery('input[name="'+i+'"]').val(e)}function toggle_nested_section(e){switch(jQuery(e).val()){case"image":jQuery(".submit-button-type-text").fadeOut("fast",function(){jQuery(".submit-button-type-image").fadeIn("fast")});break;case"text":jQuery(".submit-button-type-image").fadeOut("fast",function(){jQuery(".submit-button-type-text").fadeIn("fast")});break;default:case"1":"yikes-easy-mc-form-schedule"==jQuery(e).attr("name")?jQuery(".date-restriction-section").fadeToggle():jQuery(".login-restriction-section").fadeToggle()}return!1}function initialize_form_schedule_time_pickers(){jQuery(".date-picker").datepicker({numberOfMonths:1,showButtonPanel:!0,closeText:window.yikes_mailchimp_edit_form.closeText,currentText:window.yikes_mailchimp_edit_form.currentText,monthNames:window.yikes_mailchimp_edit_form.monthNames,monthNamesShort:window.yikes_mailchimp_edit_form.monthNamesShort,dayNames:window.yikes_mailchimp_edit_form.dayNames,dayNamesShort:window.yikes_mailchimp_edit_form.dayNamesShort,dayNamesMin:window.yikes_mailchimp_edit_form.dayNamesMin,dateFormat:window.yikes_mailchimp_edit_form.dateFormat,firstDay:window.yikes_mailchimp_edit_form.firstDay,isRTL:window.yikes_mailchimp_edit_form.isRTL,onSelect:function(e,i){event.preventDefault(),yikes_check_valid_date(e,i.lastVal,i.id)}}),jQuery(".time-picker").timepicker({scrollDefault:"now",timeFormat:"h:i A"}),jQuery(".time-picker").on("changeTime",function(e){var i=jQuery(this).attr("id");yikes_check_valid_date(jQuery("#yikes-easy-mc-form-restriction-start-date").val(),jQuery("#yikes-easy-mc-form-restriction-end-date").val(),i)})}function yikes_check_valid_date(e,i,t){var a=jQuery("#yikes-easy-mc-form-restriction-start-date").val(),n=yikes_12_to_24_hour_time_conversion(jQuery("#yikes-easy-mc-form-restriction-start-time").val()),s=jQuery("#yikes-easy-mc-form-restriction-end-date").val(),o=yikes_12_to_24_hour_time_conversion(jQuery("#yikes-easy-mc-form-restriction-end-time").val());if(new Date(a+" "+n)>new Date(s+" "+o)){if("yikes-easy-mc-form-restriction-start-date"!=t&&"yikes-easy-mc-form-restriction-end-date"!=t||jQuery("#"+t).val(i),jQuery(".date-restriction-section").find("p.description.error").length)return;jQuery(".date-restriction-section").first().find("p.description").after('<p class="description error">'+window.yikes_mailchimp_edit_form.start_date_exceeds_end_date_error+"</p>")}else jQuery(".date-restriction-section").find("p.description.error").remove()}function yikes_12_to_24_hour_time_conversion(e){if(!e)return"";var i=Number(e.match(/^(\d+)/)[1]),t=Number(e.match(/:(\d+)/)[1]),a=e.match(/\s(.*)$/)[1];"PM"==a&&i<12&&(i+=12),"AM"==a&&12==i&&(i-=12);var n=i.toString(),s=t.toString();return i<10&&(n="0"+n),t<10&&(s="0"+s),n+":"+s}function toggleUpdateEmailContainer(e){jQuery(".send-update-email").stop().fadeToggle()}function yikes_mc_prevent_default_stop_prop(e){e.preventDefault(),e.stopPropagation()}function yikes_mc_toggle_field_label_edit(e){jQuery(e).siblings(".yikes-mc-edit-field-label-input").val(jQuery(e).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val());var i=jQuery(e).siblings(".yikes-mc-expansion-section-field-label, .field-type-text"),t=jQuery(e).siblings(".yikes-mc-edit-field-label-input, .yikes-mc-save-field-label-edits-icon");jQuery(e).hasClass("dashicons-no")?(i=jQuery(e).siblings(".yikes-mc-edit-field-label-input, .yikes-mc-save-field-label-edits-icon"),t=jQuery(e).siblings(".yikes-mc-expansion-section-field-label, .field-type-text"),e.title=yikes_mailchimp_edit_form.edit_field_label_pencil_title):e.title=yikes_mailchimp_edit_form.edit_field_label_cancel_title,jQuery(e).toggleClass("dashicons-no dashicons-edit"),i.fadeToggle().promise().done(function(){t.fadeToggle()})}function yikes_mc_save_field_label_name(e,i,t){var a={action:"save_field_label_edits",list_id:i,field_data:t,nonce:yikes_mailchimp_edit_form.save_field_label_nonce};jQuery.post(yikes_mailchimp_edit_form.ajax_url,a,function(i){if("undefined"!==i&&"undefined"!==i.success)if(!0===i.success){var a=t.field_name;yikes_mc_update_field_label(e,a),yikes_mc_toggle_field_label_edit(jQuery(e).siblings(".dashicons-no"))}else{var n="";"undefined"!==i.data&&"undefined"!==i.data.message&&(n=i.data.message,yikes_mc_display_field_label_error_message(e,n))}})}function yikes_mc_update_field_label(e,i){jQuery(e).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val(i),jQuery(e).siblings(".yikes-mc-expansion-section-field-label").text(i)}function yikes_mc_display_field_label_error_message(e,i){jQuery(e).siblings(".yikes-mc-edit-field-label-message").fadeOut(function(){jQuery(this).text(i).fadeIn()})}window.Yikes_Mailchimp_Edit_Form=window.Yikes_Mailchimp_Edit_Form||{},window.yikes_mailchimp_edit_form=window.yikes_mailchimp_edit_form||{},function(e,i,t,a,n){"use strict";function s(){return t("#form-builder-div").data("list-id")}function o(){return t("#form-builder-div").data("form-id")}function l(e){const i=t(".tags-title-container");t.each(e,function(e,t){const a=function(e){return`<span class="mailchimp-tag" id="${e.id}" data-tag-name="${e.name}" data-tag-id="${e.id}">${e.name}<span class="tag-divider"></span><span class="dashicons dashicons-no-alt"></span></span>`}(t);i.append(a)}),r()}function r(){const e=t(".tags-title");0===t(".mailchimp-tag").length?e.slideUp():e.slideDown()}a.l10n=e.yikes_mailchimp_edit_form||{},t(i).ready(function(){!function(){const e={};t("#available-tags .not-available").each(function(i,a){const n=t(a),s=n.data("tag-id"),o=n.data("tag-name");e[s]={id:s,name:o}}),l(e)}(),0===jQuery("#form-builder-container > section").length&&jQuery(".edit-form-description-form-builder").hide(),t("body").find("#form-builder-container").sortable({items:".draggable:not(.non-draggable-yikes)",axis:"y",placeholder:"form-builder-placeholder",update:function(){var e=1;jQuery("#form-builder-container").find(".draggable").each(function(){jQuery(this).find(".position-input").val(e),e++})}}),t("body").on("click",".remove-field",function(){var e=jQuery(this).attr("alt"),i=jQuery(this);return t(this).parents(".yikes-mc-settings-expansion-section").prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),t(this).parents(".yikes-mc-settings-expansion-section").slideToggle(450,function(){i.parents(".draggable").find(".expansion-section-title").css("background","rgb(255, 134, 134)"),i.parents(".draggable").fadeOut("slow",function(){jQuery("#available-fields").find('li[alt="'+e+'"]').removeClass("not-available"),jQuery("#available-interest-groups").find('li[alt="'+e+'"]').removeClass("not-available"),jQuery(this).remove(),t("#form-builder-container").find(".draggable").length<1&&(t(".clear-form-fields").hide(),t(".clear-form-fields").next().hide(),t("#form-builder-container").html('<h4 class="no-fields-assigned-notice non-draggable-yikes"><em>'+a.l10n.no_fields_assigned+"</em></h4>"))})}),!1}),t("body").on("click",".hide-field",function(){return t(this).parents(".yikes-mc-settings-expansion-section").slideToggle(450).prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),t("body").on("click",".add-field-to-editor",function(){jQuery(".edit-form-description-form-builder").show();const e=t(this);return t("#available-fields .add-to-form").each(function(){var i=t("#form-builder-container").find(".draggable").length,n=t(this),o=n.attr("alt");t("#available-fields li").removeClass("available-field"),e.attr("disabled","disabled").attr("onclick","return false;").removeClass("add-field-to-editor");var l={action:"add_field_to_form",field_name:n.attr("data-attr-field-name"),merge_tag:o,field_type:n.attr("data-attr-field-type"),list_id:s()};t.ajax({url:a.l10n.ajax_url,type:"POST",data:l,dataType:"html",success:function(e,a,s){n.removeClass("add-to-form").addClass("not-available"),t(".no-fields-assigned-notice").is(":visible")&&t("#form-builder-container").html(""),t("#form-builder-container").append(e),t(".clear-form-fields").show(),t(".clear-form-fields").next().show(),t(".field-"+o+"-position").val(parseInt(i+1))},error:function(e,i,t){alert(i+e.status+e.responseText+"...")},complete:function(i,a){t("#available-fields li").addClass("available-field"),e.fadeOut("fast",function(){e.removeAttr("disabled").removeAttr("onclick").addClass("add-field-to-editor").fadeOut()})}})}),!1}),t("body").on("click",".add-interest-group-to-editor",function(){var e=t("#form-builder-container").find(".draggable").length,i=[];t("#available-interest-groups .add-to-form").each(function(){i.push({group_id:t(this).attr("alt"),field_type:t(this).attr("data-attr-field-type"),field_name:t(this).attr("data-attr-field-name")})}),t("#available-interest-groups li").removeClass("available-field");var n=t(this);n.attr("disabled","disabled").attr("onclick","return false;").removeClass("add-interest-group-to-editor");var o={action:"add_interest_group_to_form",interest_groups:i,list_id:s()};return t.ajax({url:a.l10n.ajax_url,type:"POST",data:o,dataType:"html",success:function(i,a,n){t("#available-interest-groups .add-to-form").removeClass("add-to-form").addClass("not-available"),e<1?(t("#form-builder-container").html("").append(i),t(".clear-form-fields").show(),t(".clear-form-fields").next().show()):t("#form-builder-container").append(i)},error:function(e,i,t){alert(i+e.status+e.responseText+"...")},complete:function(e,i){t("#available-interest-groups").children("li").addClass("available-field"),n.fadeOut("fast",function(){n.removeAttr("disabled").removeAttr("onclick").addClass("add-interest-group-to-editor")})}}),!1}),t("body").on("click",".add-tag-to-editor",function(){const e=t(this),i=[],n=t("#available-tags li");t("#available-tags .add-to-form").each(function(){const e=t(this);i.push({tag_name:e.data("tag-name"),tag_id:e.data("tag-id")})}),n.removeClass("available-field"),e.attr("disabled","disabled").removeClass("add-tag-to-editor");const r={action:"add_tag_to_form",tags:i,list_id:s(),form_id:o(),nonce:a.l10n.add_tag_nonce};return t.ajax({url:a.l10n.ajax_url,type:"POST",data:r,success:function(e,i,a){t("#available-tags .add-to-form").removeClass("add-to-form").addClass("not-available"),l(e.data.tags)},error:function(e,i,t){console.log(i),console.log(e.status),console.log(e.responseText)},complete:function(i,t){n.addClass("available-field"),e.removeAttr("disabled").addClass("add-tag-to-editor").hide()}}),!1}),t("body").on("click",".mailchimp-tag .dashicons.dashicons-no-alt",function(){t(".mailchimp-tag").css({"pointer-events":"none",opacity:".5"});const e=t(this),i=e.parents(".mailchimp-tag"),n=i.data("tag-id"),l={action:"remove_tag_from_form",tag:n,list_id:s(),form_id:o(),nonce:a.l10n.remove_tag_nonce};e.removeClass("dashicons-no-alt").addClass("dashicons-trash").fadeOut(550).fadeIn(550);const d=setInterval(function(){e.fadeOut(550).fadeIn(550)},700);return t.ajax({url:a.l10n.ajax_url,type:"POST",data:l,success:function(e,a,s){t(`#tag-${n}`).removeClass("not-available").removeAttr("disabled"),i.fadeOut("slow",function(){i.remove(),r(),t(".mailchimp-tag").css({"pointer-events":"auto",opacity:"1.0"})})},error:function(e,i,t){console.log(i),console.log(e.status),console.log(e.responseText)},complete:function(e,i){clearInterval(d)}}),!1}),t(".color-picker").each(function(){t(this).wpColorPicker()}),t("body").on("click",".expansion-section-title",function(){return t(this).next().stop().slideToggle(),t(this).find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),t("body").on("click","#container-container .available-field",function(){const e=t(this);if(e.hasClass("not-available"))return!1;e.toggleClass("add-to-form");const i=e.parents("ul"),a=i.siblings(".add-to-editor");0===i.children(".add-to-form").length?a.stop().fadeOut():a.stop().fadeIn()}),t("body").on("click",".hidden_setting",function(){t(".hidden_setting").removeClass("selected_hidden_setting"),t(".selected_setting_triangle").remove(),t(this).addClass("selected_hidden_setting").append('<div class="selected_setting_triangle"></div>');var e=t(this).attr("data-attr-container");t(".hidden-setting-label").hide(),t("#"+e).show()}),t("body").on("click",".close-form-expansion",function(){return t(this).parents(".yikes-mc-settings-expansion-section").slideToggle().prev().find(".yikes-mc-expansion-toggle").toggleClass("dashicons-minus"),!1}),t("body").on("click",".mv_ig_list .nav-tab",function(){const e=t(this),i=t(".nav-tab-active");if(e.hasClass("nav-tab-active")||e.hasClass("nav-tab-disabled"))return!1;const a=parseInt(e.index());i.removeClass("nav-tab-active"),t(".arrow-down").remove(),e.addClass("nav-tab-active").prepend('<div class="arrow-down"></div>');const n=t("#container-container .list-container"),s=(n.length,t("#container-container .list-container:eq("+a+")"));t("#container-container .list-container").not(s);var o=-283*a;return t.each(n,function(e,i){let n=parseInt(t(i).index());n!==a&&(o=n>a?0:-283*(n+1)),t(i).stop().animate({left:o+"px"})}),!1}),t("body").on("click",".clear-form-fields",function(){return confirm(a.l10n.bulk_delete_alert)&&t("#form-builder").find(".draggable").find(".expansion-section-title").each(function(){t(this).css("background","rgb(255, 134, 134)");var e=t(this).parents(".draggable").find(".remove-field").attr("alt");t(this).fadeOut("slow",function(){t("#available-fields").find('li[alt="'+e+'"]').removeClass("not-available"),t("#available-interest-groups").find('li[alt="'+e+'"]').removeClass("not-available"),t(this).remove(),t(".clear-form-fields").hide(),t(".clear-form-fields").next().hide(),t(".available-form-field").each(function(){t(this).removeClass("not-available")}),t("#form-builder-container").html('<h4 class="no-fields-assigned-notice non-draggable-yikes"><em>'+a.l10n.no_fields_assigned+"</em></h4>")})}),!1}),t(".yikes-mc-edit-field-label-icon").click(function(e){yikes_mc_prevent_default_stop_prop(e),jQuery(this).siblings(".yikes-mc-edit-field-label-message").fadeOut();yikes_mc_toggle_field_label_edit(this)}),t(".yikes-mc-edit-field-label-input").click(function(e){yikes_mc_prevent_default_stop_prop(e)}),t(".yikes-mc-save-field-label-edits-icon").click(function(e){yikes_mc_prevent_default_stop_prop(e),jQuery(this).siblings(".yikes-mc-edit-field-label-message").fadeOut();var i=s(),t=jQuery(this).siblings(".yikes-mc-edit-field-label-input").val(),a={field_name:t,field_id:jQuery(this).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-id").val()};jQuery(this).parents(".expansion-section-title").siblings(".yikes-mc-settings-expansion-section").children(".yikes-mc-merge-field-label").val()!==t?yikes_mc_save_field_label_name(this,i,a):yikes_mc_toggle_field_label_edit(jQuery(this).siblings(".yikes-mc-edit-field-label-icon"))}),initialize_form_schedule_time_pickers(),t(".yikes-enable-disable-ajax").click(function(){var e=t("#enable-ajax").is(":checked"),i=t("#redirect-user").is(":checked");!0===e&&!0===i?t(".redirect-new-window-div").fadeIn():t(".redirect-new-window-div").fadeOut()})})}(window,document,jQuery,Yikes_Mailchimp_Edit_Form);